{"version":3,"names":["cov_2l5r5xf47v","actualCoverage","z","WebhookRelationshipSchema","s","object","type","string","object_type","object_id","union","number","workspace_id","WebhookChangeSchema","field","before","any","optional","after","AuditContextSchema","userid","current_time","route","WebhookContextSchema","root_parent_type","is_chat","boolean","audit_context","originating_service","WebhookVersionDataSchema","context","relationships","array","changes","WebhookVersionSchema","operation","enum","data","master_id","version","deleted","traceparent","date_created","date_updated","event_publish_time","WebhookPayloadSchema","id","hist_id","date","WebhookEventSchema","CreateWebhookSchema","endpoint","url","events","health_check_url","secret","UpdateWebhookSchema","webhook_id","status","WebhookFilterSchema","event_type","ValidateWebhookSignatureSchema","payload","signature","ProcessWebhookSchema","validate_signature","default","parseWebhookTimestamp","timestamp","f","Date","getWebhookOperationType","operationMap","b","extractWebhookObjectInfo","objectType","objectId","workspaceId","userId"],"sources":["/Users/peterkrzyzek/Development/clickup-mcp-server/src/schemas/webhook-schemas.ts"],"sourcesContent":["import { z } from 'zod';\n\n// Base webhook relationship schema\nexport const WebhookRelationshipSchema = z.object({\n  type: z.string(),\n  object_type: z.string(),\n  object_id: z.union([z.string(), z.number()]),\n  workspace_id: z.string()\n});\n\n// Webhook change schema\nexport const WebhookChangeSchema = z.object({\n  field: z.string(),\n  before: z.any().optional(),\n  after: z.any().optional()\n});\n\n// Audit context schema\nexport const AuditContextSchema = z.object({\n  userid: z.number(),\n  current_time: z.number(),\n  route: z.string()\n});\n\n// Webhook context schema\nexport const WebhookContextSchema = z.object({\n  root_parent_type: z.number(),\n  is_chat: z.boolean(),\n  audit_context: AuditContextSchema,\n  originating_service: z.string()\n});\n\n// Webhook version data schema\nexport const WebhookVersionDataSchema = z.object({\n  context: WebhookContextSchema,\n  relationships: z.array(WebhookRelationshipSchema),\n  changes: z.array(WebhookChangeSchema)\n});\n\n// Webhook version schema\nexport const WebhookVersionSchema = z.object({\n  object_type: z.string(),\n  object_id: z.union([z.string(), z.number()]),\n  workspace_id: z.number(),\n  operation: z.enum(['c', 'u', 'd']), // create, update, delete\n  data: WebhookVersionDataSchema,\n  master_id: z.number(),\n  version: z.number(),\n  deleted: z.boolean(),\n  traceparent: z.string(),\n  date_created: z.number(),\n  date_updated: z.number(),\n  event_publish_time: z.number()\n});\n\n// Main webhook payload schema\nexport const WebhookPayloadSchema = z.object({\n  id: z.number(),\n  hist_id: z.string(),\n  date: z.number(),\n  version: WebhookVersionSchema\n});\n\n// Webhook configuration schemas\nexport const WebhookEventSchema = z.enum([\n  'taskCreated',\n  'taskUpdated',\n  'taskDeleted',\n  'taskStatusUpdated',\n  'taskAssigneeUpdated',\n  'taskDueDateUpdated',\n  'taskCommentPosted',\n  'taskCommentUpdated',\n  'taskTimeTracked',\n  'taskTimeUpdated',\n  'listCreated',\n  'listUpdated',\n  'listDeleted',\n  'folderCreated',\n  'folderUpdated',\n  'folderDeleted',\n  'spaceCreated',\n  'spaceUpdated',\n  'spaceDeleted',\n  'goalCreated',\n  'goalUpdated',\n  'goalDeleted',\n  'goalTargetUpdated'\n]);\n\nexport const CreateWebhookSchema = z.object({\n  workspace_id: z.string(),\n  endpoint: z.string().url(),\n  events: z.array(WebhookEventSchema),\n  health_check_url: z.string().url().optional(),\n  secret: z.string().optional()\n});\n\nexport const UpdateWebhookSchema = z.object({\n  webhook_id: z.string(),\n  endpoint: z.string().url().optional(),\n  events: z.array(WebhookEventSchema).optional(),\n  health_check_url: z.string().url().optional(),\n  secret: z.string().optional(),\n  status: z.enum(['active', 'inactive']).optional()\n});\n\nexport const WebhookFilterSchema = z.object({\n  workspace_id: z.string(),\n  status: z.enum(['active', 'inactive']).optional(),\n  event_type: WebhookEventSchema.optional()\n});\n\n// Webhook signature validation schema\nexport const ValidateWebhookSignatureSchema = z.object({\n  payload: z.string(),\n  signature: z.string(),\n  secret: z.string()\n});\n\n// Webhook processing schemas\nexport const ProcessWebhookSchema = z.object({\n  payload: WebhookPayloadSchema,\n  validate_signature: z.boolean().default(true),\n  signature: z.string().optional(),\n  secret: z.string().optional()\n});\n\n// Type exports\nexport type WebhookPayload = z.infer<typeof WebhookPayloadSchema>;\nexport type WebhookRelationship = z.infer<typeof WebhookRelationshipSchema>;\nexport type WebhookChange = z.infer<typeof WebhookChangeSchema>;\nexport type WebhookContext = z.infer<typeof WebhookContextSchema>;\nexport type WebhookVersionData = z.infer<typeof WebhookVersionDataSchema>;\nexport type WebhookVersion = z.infer<typeof WebhookVersionSchema>;\nexport type WebhookEvent = z.infer<typeof WebhookEventSchema>;\nexport type CreateWebhookRequest = z.infer<typeof CreateWebhookSchema>;\nexport type UpdateWebhookRequest = z.infer<typeof UpdateWebhookSchema>;\nexport type WebhookFilter = z.infer<typeof WebhookFilterSchema>;\nexport type ValidateWebhookSignatureRequest = z.infer<typeof ValidateWebhookSignatureSchema>;\nexport type ProcessWebhookRequest = z.infer<typeof ProcessWebhookSchema>;\n\n// Utility functions for webhook processing\nexport const parseWebhookTimestamp = (timestamp: number): Date => {\n  return new Date(timestamp);\n};\n\nexport const getWebhookOperationType = (operation: string): string => {\n  const operationMap: Record<string, string> = {\n    'c': 'create',\n    'u': 'update',\n    'd': 'delete'\n  };\n  return operationMap[operation] || operation;\n};\n\nexport const extractWebhookObjectInfo = (payload: WebhookPayload) => {\n  return {\n    objectType: payload.version.object_type,\n    objectId: payload.version.object_id,\n    workspaceId: payload.version.workspace_id,\n    operation: getWebhookOperationType(payload.version.operation),\n    timestamp: parseWebhookTimestamp(payload.date),\n    userId: payload.version.data.context.audit_context.userid\n  };\n};\n"],"mappings":"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","ignoreList":[]}