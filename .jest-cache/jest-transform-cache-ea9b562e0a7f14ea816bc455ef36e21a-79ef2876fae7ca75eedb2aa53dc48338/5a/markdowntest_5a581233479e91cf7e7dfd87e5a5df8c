15946717e8b692050edd97681927cd5f
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const markdown_1 = require("../utils/markdown");
describe('Markdown Utilities', () => {
    describe('markdownToHtml', () => {
        it('should convert basic markdown to HTML', () => {
            const markdown = '# Header\n\n**Bold text** and *italic text*';
            const html = (0, markdown_1.markdownToHtml)(markdown);
            expect(html).toContain('<h1>Header</h1>');
            expect(html).toContain('<strong>Bold text</strong>');
            expect(html).toContain('<em>italic text</em>');
        });
        it('should handle code blocks', () => {
            const markdown = '```javascript\nconst x = 1;\n```';
            const html = (0, markdown_1.markdownToHtml)(markdown);
            expect(html).toContain('<pre><code class="language-javascript">');
            expect(html).toContain('const x = 1;');
        });
        it('should handle links and lists', () => {
            const markdown = '- [Link](https://example.com)\n- Item 2';
            const html = (0, markdown_1.markdownToHtml)(markdown);
            expect(html).toContain('<ul>');
            expect(html).toContain('<a href="https://example.com">Link</a>');
        });
        it('should return empty string for invalid input', () => {
            expect((0, markdown_1.markdownToHtml)('')).toBe('');
            expect((0, markdown_1.markdownToHtml)(null)).toBe('');
            expect((0, markdown_1.markdownToHtml)(undefined)).toBe('');
        });
    });
    describe('htmlToMarkdown', () => {
        it('should convert basic HTML to markdown', () => {
            const html = '<h1>Header</h1><p><strong>Bold</strong> and <em>italic</em></p>';
            const markdown = (0, markdown_1.htmlToMarkdown)(html);
            expect(markdown).toContain('# Header');
            expect(markdown).toContain('**Bold**');
            expect(markdown).toContain('*italic*');
        });
        it('should handle lists and links', () => {
            const html = '<ul><li><a href="https://example.com">Link</a></li><li>Item 2</li></ul>';
            const markdown = (0, markdown_1.htmlToMarkdown)(html);
            expect(markdown).toContain('- [Link](https://example.com)');
            expect(markdown).toContain('- Item 2');
        });
        it('should return empty string for invalid input', () => {
            expect((0, markdown_1.htmlToMarkdown)('')).toBe('');
            expect((0, markdown_1.htmlToMarkdown)(null)).toBe('');
            expect((0, markdown_1.htmlToMarkdown)(undefined)).toBe('');
        });
    });
    describe('markdownToPlainText', () => {
        it('should strip markdown formatting', () => {
            const markdown = '# Header\n\n**Bold** and *italic* text with `code`';
            const plainText = (0, markdown_1.markdownToPlainText)(markdown);
            expect(plainText).not.toContain('#');
            expect(plainText).not.toContain('**');
            expect(plainText).not.toContain('*');
            expect(plainText).not.toContain('`');
            expect(plainText).toContain('Header');
            expect(plainText).toContain('Bold');
            expect(plainText).toContain('italic');
            expect(plainText).toContain('code');
        });
        it('should handle links and images', () => {
            const markdown = '[Link text](https://example.com) and ![Alt text](image.jpg)';
            const plainText = (0, markdown_1.markdownToPlainText)(markdown);
            expect(plainText).toContain('Link text');
            expect(plainText).toContain('Alt text');
            expect(plainText).not.toContain('https://example.com');
            expect(plainText).not.toContain('image.jpg');
        });
    });
    describe('isMarkdown', () => {
        it('should detect markdown content', () => {
            expect((0, markdown_1.isMarkdown)('# Header')).toBe(true);
            expect((0, markdown_1.isMarkdown)('**bold**')).toBe(true);
            expect((0, markdown_1.isMarkdown)('*italic*')).toBe(true);
            expect((0, markdown_1.isMarkdown)('`code`')).toBe(true);
            expect((0, markdown_1.isMarkdown)('[link](url)')).toBe(true);
            expect((0, markdown_1.isMarkdown)('- list item')).toBe(true);
            expect((0, markdown_1.isMarkdown)('1. numbered item')).toBe(true);
            expect((0, markdown_1.isMarkdown)('> blockquote')).toBe(true);
        });
        it('should not detect plain text as markdown', () => {
            expect((0, markdown_1.isMarkdown)('Just plain text')).toBe(false);
            expect((0, markdown_1.isMarkdown)('Some text with numbers 123')).toBe(false);
            expect((0, markdown_1.isMarkdown)('')).toBe(false);
            expect((0, markdown_1.isMarkdown)(null)).toBe(false);
        });
    });
    describe('isHtml', () => {
        it('should detect HTML content', () => {
            expect((0, markdown_1.isHtml)('<p>paragraph</p>')).toBe(true);
            expect((0, markdown_1.isHtml)('<strong>bold</strong>')).toBe(true);
            expect((0, markdown_1.isHtml)('<a href="url">link</a>')).toBe(true);
        });
        it('should not detect plain text as HTML', () => {
            expect((0, markdown_1.isHtml)('Just plain text')).toBe(false);
            expect((0, markdown_1.isHtml)('Text with < and > symbols')).toBe(false);
            expect((0, markdown_1.isHtml)('')).toBe(false);
            expect((0, markdown_1.isHtml)(null)).toBe(false);
        });
    });
    describe('formatContent', () => {
        it('should convert markdown to HTML', () => {
            const markdown = '**bold**';
            const html = (0, markdown_1.formatContent)(markdown, 'html');
            expect(html).toContain('<strong>bold</strong>');
        });
        it('should convert HTML to markdown', () => {
            const html = '<strong>bold</strong>';
            const markdown = (0, markdown_1.formatContent)(html, 'markdown');
            expect(markdown).toContain('**bold**');
        });
        it('should convert to plain text', () => {
            const markdown = '**bold**';
            const plain = (0, markdown_1.formatContent)(markdown, 'plain');
            expect(plain).toContain('bold');
            expect(plain).not.toContain('**');
        });
    });
    describe('prepareContentForClickUp', () => {
        it('should prepare markdown content for ClickUp API', () => {
            const markdown = '# Header\n\n**Bold** text';
            const result = (0, markdown_1.prepareContentForClickUp)(markdown);
            expect(result.description).toContain('<h1>Header</h1>');
            expect(result.description).toContain('<strong>Bold</strong>');
            expect(result.text_content).toContain('Header');
            expect(result.text_content).toContain('Bold');
            expect(result.text_content).not.toContain('<h1>');
            expect(result.text_content).not.toContain('**');
        });
        it('should handle plain text content', () => {
            const plainText = 'Just plain text';
            const result = (0, markdown_1.prepareContentForClickUp)(plainText);
            expect(result.description).toBe(plainText);
            expect(result.text_content).toBe(plainText);
        });
        it('should handle HTML content', () => {
            const html = '<p><strong>Bold</strong> text</p>';
            const result = (0, markdown_1.prepareContentForClickUp)(html);
            expect(result.description).toBe(html);
            expect(result.text_content).toContain('Bold text');
            expect(result.text_content).not.toContain('<p>');
        });
        it('should handle empty content', () => {
            const result = (0, markdown_1.prepareContentForClickUp)('');
            expect(result.description).toBe('');
            expect(result.text_content).toBeUndefined();
        });
    });
    describe('processClickUpResponse', () => {
        it('should process task response with HTML description', () => {
            const response = {
                id: '123',
                name: 'Test Task',
                description: '<h1>Header</h1><p><strong>Bold</strong> text</p>',
                text_content: 'Header\nBold text'
            };
            const processed = (0, markdown_1.processClickUpResponse)(response);
            expect(processed.description_markdown).toContain('# Header');
            expect(processed.description_markdown).toContain('**Bold**');
        });
        it('should process comment response with rich text blocks', () => {
            const response = {
                id: '456',
                comment: ['<p>Comment with <strong>bold</strong> text</p>'],
                comment_text: 'Comment with bold text'
            };
            const processed = (0, markdown_1.processClickUpResponse)(response);
            expect(processed.comment_markdown).toContain('**bold**');
        });
        it('should handle responses without HTML content', () => {
            const response = {
                id: '789',
                name: 'Plain Task',
                description: 'Just plain text'
            };
            const processed = (0, markdown_1.processClickUpResponse)(response);
            expect(processed.description_markdown).toBeUndefined();
            expect(processed.description).toBe('Just plain text');
        });
        it('should handle null/undefined responses', () => {
            expect((0, markdown_1.processClickUpResponse)(null)).toBe(null);
            expect((0, markdown_1.processClickUpResponse)(undefined)).toBe(undefined);
            expect((0, markdown_1.processClickUpResponse)('string')).toBe('string');
        });
    });
    describe('GitHub Flavored Markdown Support', () => {
        it('should support strikethrough', () => {
            const markdown = '~~strikethrough~~';
            const html = (0, markdown_1.markdownToHtml)(markdown);
            expect(html).toContain('<del>strikethrough</del>');
        });
        it('should support tables', () => {
            const markdown = '| Header 1 | Header 2 |\n|----------|----------|\n| Cell 1   | Cell 2   |';
            const html = (0, markdown_1.markdownToHtml)(markdown);
            expect(html).toContain('<table>');
            expect(html).toContain('<th>Header 1</th>');
            expect(html).toContain('<td>Cell 1</td>');
        });
        it('should support task lists', () => {
            const markdown = '- [x] Completed task\n- [ ] Incomplete task';
            const html = (0, markdown_1.markdownToHtml)(markdown);
            expect(html).toContain('type="checkbox"');
            expect(html).toContain('checked=""');
        });
        it('should support fenced code blocks with language', () => {
            const markdown = '```typescript\nconst x: number = 1;\n```';
            const html = (0, markdown_1.markdownToHtml)(markdown);
            expect(html).toContain('class="language-typescript"');
            expect(html).toContain('const x: number = 1;');
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL3BldGVya3J6eXplay9EZXZlbG9wbWVudC9jbGlja3VwLW1jcC1zZXJ2ZXIvc3JjL3Rlc3RzL21hcmtkb3duLnRlc3QudHMiLCJtYXBwaW5ncyI6Ijs7QUFBQSxnREFTMkI7QUFFM0IsUUFBUSxDQUFDLG9CQUFvQixFQUFFLEdBQUcsRUFBRTtJQUNsQyxRQUFRLENBQUMsZ0JBQWdCLEVBQUUsR0FBRyxFQUFFO1FBQzlCLEVBQUUsQ0FBQyx1Q0FBdUMsRUFBRSxHQUFHLEVBQUU7WUFDL0MsTUFBTSxRQUFRLEdBQUcsNkNBQTZDLENBQUM7WUFDL0QsTUFBTSxJQUFJLEdBQUcsSUFBQSx5QkFBYyxFQUFDLFFBQVEsQ0FBQyxDQUFDO1lBRXRDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxTQUFTLENBQUMsaUJBQWlCLENBQUMsQ0FBQztZQUMxQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsU0FBUyxDQUFDLDRCQUE0QixDQUFDLENBQUM7WUFDckQsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDLFNBQVMsQ0FBQyxzQkFBc0IsQ0FBQyxDQUFDO1FBQ2pELENBQUMsQ0FBQyxDQUFDO1FBRUgsRUFBRSxDQUFDLDJCQUEyQixFQUFFLEdBQUcsRUFBRTtZQUNuQyxNQUFNLFFBQVEsR0FBRyxrQ0FBa0MsQ0FBQztZQUNwRCxNQUFNLElBQUksR0FBRyxJQUFBLHlCQUFjLEVBQUMsUUFBUSxDQUFDLENBQUM7WUFFdEMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDLFNBQVMsQ0FBQyx5Q0FBeUMsQ0FBQyxDQUFDO1lBQ2xFLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxTQUFTLENBQUMsY0FBYyxDQUFDLENBQUM7UUFDekMsQ0FBQyxDQUFDLENBQUM7UUFFSCxFQUFFLENBQUMsK0JBQStCLEVBQUUsR0FBRyxFQUFFO1lBQ3ZDLE1BQU0sUUFBUSxHQUFHLHlDQUF5QyxDQUFDO1lBQzNELE1BQU0sSUFBSSxHQUFHLElBQUEseUJBQWMsRUFBQyxRQUFRLENBQUMsQ0FBQztZQUV0QyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxDQUFDO1lBQy9CLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxTQUFTLENBQUMsd0NBQXdDLENBQUMsQ0FBQztRQUNuRSxDQUFDLENBQUMsQ0FBQztRQUVILEVBQUUsQ0FBQyw4Q0FBOEMsRUFBRSxHQUFHLEVBQUU7WUFDdEQsTUFBTSxDQUFDLElBQUEseUJBQWMsRUFBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQztZQUNwQyxNQUFNLENBQUMsSUFBQSx5QkFBYyxFQUFDLElBQVcsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDO1lBQzdDLE1BQU0sQ0FBQyxJQUFBLHlCQUFjLEVBQUMsU0FBZ0IsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDO1FBQ3BELENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7SUFFSCxRQUFRLENBQUMsZ0JBQWdCLEVBQUUsR0FBRyxFQUFFO1FBQzlCLEVBQUUsQ0FBQyx1Q0FBdUMsRUFBRSxHQUFHLEVBQUU7WUFDL0MsTUFBTSxJQUFJLEdBQUcsaUVBQWlFLENBQUM7WUFDL0UsTUFBTSxRQUFRLEdBQUcsSUFBQSx5QkFBYyxFQUFDLElBQUksQ0FBQyxDQUFDO1lBRXRDLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQyxTQUFTLENBQUMsVUFBVSxDQUFDLENBQUM7WUFDdkMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxVQUFVLENBQUMsQ0FBQztZQUN2QyxNQUFNLENBQUMsUUFBUSxDQUFDLENBQUMsU0FBUyxDQUFDLFVBQVUsQ0FBQyxDQUFDO1FBQ3pDLENBQUMsQ0FBQyxDQUFDO1FBRUgsRUFBRSxDQUFDLCtCQUErQixFQUFFLEdBQUcsRUFBRTtZQUN2QyxNQUFNLElBQUksR0FBRyx5RUFBeUUsQ0FBQztZQUN2RixNQUFNLFFBQVEsR0FBRyxJQUFBLHlCQUFjLEVBQUMsSUFBSSxDQUFDLENBQUM7WUFFdEMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDLFNBQVMsQ0FBQywrQkFBK0IsQ0FBQyxDQUFDO1lBQzVELE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQyxTQUFTLENBQUMsVUFBVSxDQUFDLENBQUM7UUFDekMsQ0FBQyxDQUFDLENBQUM7UUFFSCxFQUFFLENBQUMsOENBQThDLEVBQUUsR0FBRyxFQUFFO1lBQ3RELE1BQU0sQ0FBQyxJQUFBLHlCQUFjLEVBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUM7WUFDcEMsTUFBTSxDQUFDLElBQUEseUJBQWMsRUFBQyxJQUFXLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQztZQUM3QyxNQUFNLENBQUMsSUFBQSx5QkFBYyxFQUFDLFNBQWdCLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQztRQUNwRCxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0lBRUgsUUFBUSxDQUFDLHFCQUFxQixFQUFFLEdBQUcsRUFBRTtRQUNuQyxFQUFFLENBQUMsa0NBQWtDLEVBQUUsR0FBRyxFQUFFO1lBQzFDLE1BQU0sUUFBUSxHQUFHLG9EQUFvRCxDQUFDO1lBQ3RFLE1BQU0sU0FBUyxHQUFHLElBQUEsOEJBQW1CLEVBQUMsUUFBUSxDQUFDLENBQUM7WUFFaEQsTUFBTSxDQUFDLFNBQVMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLENBQUM7WUFDckMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDdEMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLENBQUM7WUFDckMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLENBQUM7WUFDckMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxRQUFRLENBQUMsQ0FBQztZQUN0QyxNQUFNLENBQUMsU0FBUyxDQUFDLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxDQUFDO1lBQ3BDLE1BQU0sQ0FBQyxTQUFTLENBQUMsQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFDLENBQUM7WUFDdEMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUN0QyxDQUFDLENBQUMsQ0FBQztRQUVILEVBQUUsQ0FBQyxnQ0FBZ0MsRUFBRSxHQUFHLEVBQUU7WUFDeEMsTUFBTSxRQUFRLEdBQUcsNkRBQTZELENBQUM7WUFDL0UsTUFBTSxTQUFTLEdBQUcsSUFBQSw4QkFBbUIsRUFBQyxRQUFRLENBQUMsQ0FBQztZQUVoRCxNQUFNLENBQUMsU0FBUyxDQUFDLENBQUMsU0FBUyxDQUFDLFdBQVcsQ0FBQyxDQUFDO1lBQ3pDLE1BQU0sQ0FBQyxTQUFTLENBQUMsQ0FBQyxTQUFTLENBQUMsVUFBVSxDQUFDLENBQUM7WUFDeEMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxTQUFTLENBQUMscUJBQXFCLENBQUMsQ0FBQztZQUN2RCxNQUFNLENBQUMsU0FBUyxDQUFDLENBQUMsR0FBRyxDQUFDLFNBQVMsQ0FBQyxXQUFXLENBQUMsQ0FBQztRQUMvQyxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0lBRUgsUUFBUSxDQUFDLFlBQVksRUFBRSxHQUFHLEVBQUU7UUFDMUIsRUFBRSxDQUFDLGdDQUFnQyxFQUFFLEdBQUcsRUFBRTtZQUN4QyxNQUFNLENBQUMsSUFBQSxxQkFBVSxFQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1lBQzFDLE1BQU0sQ0FBQyxJQUFBLHFCQUFVLEVBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDMUMsTUFBTSxDQUFDLElBQUEscUJBQVUsRUFBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUMxQyxNQUFNLENBQUMsSUFBQSxxQkFBVSxFQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1lBQ3hDLE1BQU0sQ0FBQyxJQUFBLHFCQUFVLEVBQUMsYUFBYSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDN0MsTUFBTSxDQUFDLElBQUEscUJBQVUsRUFBQyxhQUFhLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUM3QyxNQUFNLENBQUMsSUFBQSxxQkFBVSxFQUFDLGtCQUFrQixDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDbEQsTUFBTSxDQUFDLElBQUEscUJBQVUsRUFBQyxjQUFjLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUNoRCxDQUFDLENBQUMsQ0FBQztRQUVILEVBQUUsQ0FBQywwQ0FBMEMsRUFBRSxHQUFHLEVBQUU7WUFDbEQsTUFBTSxDQUFDLElBQUEscUJBQVUsRUFBQyxpQkFBaUIsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBQ2xELE1BQU0sQ0FBQyxJQUFBLHFCQUFVLEVBQUMsNEJBQTRCLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztZQUM3RCxNQUFNLENBQUMsSUFBQSxxQkFBVSxFQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBQ25DLE1BQU0sQ0FBQyxJQUFBLHFCQUFVLEVBQUMsSUFBVyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDOUMsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztJQUVILFFBQVEsQ0FBQyxRQUFRLEVBQUUsR0FBRyxFQUFFO1FBQ3RCLEVBQUUsQ0FBQyw0QkFBNEIsRUFBRSxHQUFHLEVBQUU7WUFDcEMsTUFBTSxDQUFDLElBQUEsaUJBQU0sRUFBQyxrQkFBa0IsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1lBQzlDLE1BQU0sQ0FBQyxJQUFBLGlCQUFNLEVBQUMsdUJBQXVCLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUNuRCxNQUFNLENBQUMsSUFBQSxpQkFBTSxFQUFDLHdCQUF3QixDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDdEQsQ0FBQyxDQUFDLENBQUM7UUFFSCxFQUFFLENBQUMsc0NBQXNDLEVBQUUsR0FBRyxFQUFFO1lBQzlDLE1BQU0sQ0FBQyxJQUFBLGlCQUFNLEVBQUMsaUJBQWlCLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztZQUM5QyxNQUFNLENBQUMsSUFBQSxpQkFBTSxFQUFDLDJCQUEyQixDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7WUFDeEQsTUFBTSxDQUFDLElBQUEsaUJBQU0sRUFBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztZQUMvQixNQUFNLENBQUMsSUFBQSxpQkFBTSxFQUFDLElBQVcsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQzFDLENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7SUFFSCxRQUFRLENBQUMsZUFBZSxFQUFFLEdBQUcsRUFBRTtRQUM3QixFQUFFLENBQUMsaUNBQWlDLEVBQUUsR0FBRyxFQUFFO1lBQ3pDLE1BQU0sUUFBUSxHQUFHLFVBQVUsQ0FBQztZQUM1QixNQUFNLElBQUksR0FBRyxJQUFBLHdCQUFhLEVBQUMsUUFBUSxFQUFFLE1BQU0sQ0FBQyxDQUFDO1lBRTdDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxTQUFTLENBQUMsdUJBQXVCLENBQUMsQ0FBQztRQUNsRCxDQUFDLENBQUMsQ0FBQztRQUVILEVBQUUsQ0FBQyxpQ0FBaUMsRUFBRSxHQUFHLEVBQUU7WUFDekMsTUFBTSxJQUFJLEdBQUcsdUJBQXVCLENBQUM7WUFDckMsTUFBTSxRQUFRLEdBQUcsSUFBQSx3QkFBYSxFQUFDLElBQUksRUFBRSxVQUFVLENBQUMsQ0FBQztZQUVqRCxNQUFNLENBQUMsUUFBUSxDQUFDLENBQUMsU0FBUyxDQUFDLFVBQVUsQ0FBQyxDQUFDO1FBQ3pDLENBQUMsQ0FBQyxDQUFDO1FBRUgsRUFBRSxDQUFDLDhCQUE4QixFQUFFLEdBQUcsRUFBRTtZQUN0QyxNQUFNLFFBQVEsR0FBRyxVQUFVLENBQUM7WUFDNUIsTUFBTSxLQUFLLEdBQUcsSUFBQSx3QkFBYSxFQUFDLFFBQVEsRUFBRSxPQUFPLENBQUMsQ0FBQztZQUUvQyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxDQUFDO1lBQ2hDLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQyxHQUFHLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ3BDLENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7SUFFSCxRQUFRLENBQUMsMEJBQTBCLEVBQUUsR0FBRyxFQUFFO1FBQ3hDLEVBQUUsQ0FBQyxpREFBaUQsRUFBRSxHQUFHLEVBQUU7WUFDekQsTUFBTSxRQUFRLEdBQUcsMkJBQTJCLENBQUM7WUFDN0MsTUFBTSxNQUFNLEdBQUcsSUFBQSxtQ0FBd0IsRUFBQyxRQUFRLENBQUMsQ0FBQztZQUVsRCxNQUFNLENBQUMsTUFBTSxDQUFDLFdBQVcsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDO1lBQ3hELE1BQU0sQ0FBQyxNQUFNLENBQUMsV0FBVyxDQUFDLENBQUMsU0FBUyxDQUFDLHVCQUF1QixDQUFDLENBQUM7WUFDOUQsTUFBTSxDQUFDLE1BQU0sQ0FBQyxZQUFZLENBQUMsQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFDLENBQUM7WUFDaEQsTUFBTSxDQUFDLE1BQU0sQ0FBQyxZQUFZLENBQUMsQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLENBQUM7WUFDOUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxZQUFZLENBQUMsQ0FBQyxHQUFHLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxDQUFDO1lBQ2xELE1BQU0sQ0FBQyxNQUFNLENBQUMsWUFBWSxDQUFDLENBQUMsR0FBRyxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUNsRCxDQUFDLENBQUMsQ0FBQztRQUVILEVBQUUsQ0FBQyxrQ0FBa0MsRUFBRSxHQUFHLEVBQUU7WUFDMUMsTUFBTSxTQUFTLEdBQUcsaUJBQWlCLENBQUM7WUFDcEMsTUFBTSxNQUFNLEdBQUcsSUFBQSxtQ0FBd0IsRUFBQyxTQUFTLENBQUMsQ0FBQztZQUVuRCxNQUFNLENBQUMsTUFBTSxDQUFDLFdBQVcsQ0FBQyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQztZQUMzQyxNQUFNLENBQUMsTUFBTSxDQUFDLFlBQVksQ0FBQyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQztRQUM5QyxDQUFDLENBQUMsQ0FBQztRQUVILEVBQUUsQ0FBQyw0QkFBNEIsRUFBRSxHQUFHLEVBQUU7WUFDcEMsTUFBTSxJQUFJLEdBQUcsbUNBQW1DLENBQUM7WUFDakQsTUFBTSxNQUFNLEdBQUcsSUFBQSxtQ0FBd0IsRUFBQyxJQUFJLENBQUMsQ0FBQztZQUU5QyxNQUFNLENBQUMsTUFBTSxDQUFDLFdBQVcsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUN0QyxNQUFNLENBQUMsTUFBTSxDQUFDLFlBQVksQ0FBQyxDQUFDLFNBQVMsQ0FBQyxXQUFXLENBQUMsQ0FBQztZQUNuRCxNQUFNLENBQUMsTUFBTSxDQUFDLFlBQVksQ0FBQyxDQUFDLEdBQUcsQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDbkQsQ0FBQyxDQUFDLENBQUM7UUFFSCxFQUFFLENBQUMsNkJBQTZCLEVBQUUsR0FBRyxFQUFFO1lBQ3JDLE1BQU0sTUFBTSxHQUFHLElBQUEsbUNBQXdCLEVBQUMsRUFBRSxDQUFDLENBQUM7WUFFNUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxXQUFXLENBQUMsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUM7WUFDcEMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxZQUFZLENBQUMsQ0FBQyxhQUFhLEVBQUUsQ0FBQztRQUM5QyxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0lBRUgsUUFBUSxDQUFDLHdCQUF3QixFQUFFLEdBQUcsRUFBRTtRQUN0QyxFQUFFLENBQUMsb0RBQW9ELEVBQUUsR0FBRyxFQUFFO1lBQzVELE1BQU0sUUFBUSxHQUFHO2dCQUNmLEVBQUUsRUFBRSxLQUFLO2dCQUNULElBQUksRUFBRSxXQUFXO2dCQUNqQixXQUFXLEVBQUUsa0RBQWtEO2dCQUMvRCxZQUFZLEVBQUUsbUJBQW1CO2FBQ2xDLENBQUM7WUFFRixNQUFNLFNBQVMsR0FBRyxJQUFBLGlDQUFzQixFQUFDLFFBQVEsQ0FBQyxDQUFDO1lBRW5ELE1BQU0sQ0FBQyxTQUFTLENBQUMsb0JBQW9CLENBQUMsQ0FBQyxTQUFTLENBQUMsVUFBVSxDQUFDLENBQUM7WUFDN0QsTUFBTSxDQUFDLFNBQVMsQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxVQUFVLENBQUMsQ0FBQztRQUMvRCxDQUFDLENBQUMsQ0FBQztRQUVILEVBQUUsQ0FBQyx1REFBdUQsRUFBRSxHQUFHLEVBQUU7WUFDL0QsTUFBTSxRQUFRLEdBQUc7Z0JBQ2YsRUFBRSxFQUFFLEtBQUs7Z0JBQ1QsT0FBTyxFQUFFLENBQUMsZ0RBQWdELENBQUM7Z0JBQzNELFlBQVksRUFBRSx3QkFBd0I7YUFDdkMsQ0FBQztZQUVGLE1BQU0sU0FBUyxHQUFHLElBQUEsaUNBQXNCLEVBQUMsUUFBUSxDQUFDLENBQUM7WUFFbkQsTUFBTSxDQUFDLFNBQVMsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxVQUFVLENBQUMsQ0FBQztRQUMzRCxDQUFDLENBQUMsQ0FBQztRQUVILEVBQUUsQ0FBQyw4Q0FBOEMsRUFBRSxHQUFHLEVBQUU7WUFDdEQsTUFBTSxRQUFRLEdBQUc7Z0JBQ2YsRUFBRSxFQUFFLEtBQUs7Z0JBQ1QsSUFBSSxFQUFFLFlBQVk7Z0JBQ2xCLFdBQVcsRUFBRSxpQkFBaUI7YUFDL0IsQ0FBQztZQUVGLE1BQU0sU0FBUyxHQUFHLElBQUEsaUNBQXNCLEVBQUMsUUFBUSxDQUFDLENBQUM7WUFFbkQsTUFBTSxDQUFDLFNBQVMsQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDLGFBQWEsRUFBRSxDQUFDO1lBQ3ZELE1BQU0sQ0FBQyxTQUFTLENBQUMsV0FBVyxDQUFDLENBQUMsSUFBSSxDQUFDLGlCQUFpQixDQUFDLENBQUM7UUFDeEQsQ0FBQyxDQUFDLENBQUM7UUFFSCxFQUFFLENBQUMsd0NBQXdDLEVBQUUsR0FBRyxFQUFFO1lBQ2hELE1BQU0sQ0FBQyxJQUFBLGlDQUFzQixFQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1lBQ2hELE1BQU0sQ0FBQyxJQUFBLGlDQUFzQixFQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDO1lBQzFELE1BQU0sQ0FBQyxJQUFBLGlDQUFzQixFQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1FBQzFELENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7SUFFSCxRQUFRLENBQUMsa0NBQWtDLEVBQUUsR0FBRyxFQUFFO1FBQ2hELEVBQUUsQ0FBQyw4QkFBOEIsRUFBRSxHQUFHLEVBQUU7WUFDdEMsTUFBTSxRQUFRLEdBQUcsbUJBQW1CLENBQUM7WUFDckMsTUFBTSxJQUFJLEdBQUcsSUFBQSx5QkFBYyxFQUFDLFFBQVEsQ0FBQyxDQUFDO1lBRXRDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxTQUFTLENBQUMsMEJBQTBCLENBQUMsQ0FBQztRQUNyRCxDQUFDLENBQUMsQ0FBQztRQUVILEVBQUUsQ0FBQyx1QkFBdUIsRUFBRSxHQUFHLEVBQUU7WUFDL0IsTUFBTSxRQUFRLEdBQUcsMkVBQTJFLENBQUM7WUFDN0YsTUFBTSxJQUFJLEdBQUcsSUFBQSx5QkFBYyxFQUFDLFFBQVEsQ0FBQyxDQUFDO1lBRXRDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxTQUFTLENBQUMsU0FBUyxDQUFDLENBQUM7WUFDbEMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDLFNBQVMsQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDO1lBQzVDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxTQUFTLENBQUMsaUJBQWlCLENBQUMsQ0FBQztRQUM1QyxDQUFDLENBQUMsQ0FBQztRQUVILEVBQUUsQ0FBQywyQkFBMkIsRUFBRSxHQUFHLEVBQUU7WUFDbkMsTUFBTSxRQUFRLEdBQUcsNkNBQTZDLENBQUM7WUFDL0QsTUFBTSxJQUFJLEdBQUcsSUFBQSx5QkFBYyxFQUFDLFFBQVEsQ0FBQyxDQUFDO1lBRXRDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxTQUFTLENBQUMsaUJBQWlCLENBQUMsQ0FBQztZQUMxQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsU0FBUyxDQUFDLFlBQVksQ0FBQyxDQUFDO1FBQ3ZDLENBQUMsQ0FBQyxDQUFDO1FBRUgsRUFBRSxDQUFDLGlEQUFpRCxFQUFFLEdBQUcsRUFBRTtZQUN6RCxNQUFNLFFBQVEsR0FBRywwQ0FBMEMsQ0FBQztZQUM1RCxNQUFNLElBQUksR0FBRyxJQUFBLHlCQUFjLEVBQUMsUUFBUSxDQUFDLENBQUM7WUFFdEMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDLFNBQVMsQ0FBQyw2QkFBNkIsQ0FBQyxDQUFDO1lBQ3RELE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxTQUFTLENBQUMsc0JBQXNCLENBQUMsQ0FBQztRQUNqRCxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQyxDQUFDLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL1VzZXJzL3BldGVya3J6eXplay9EZXZlbG9wbWVudC9jbGlja3VwLW1jcC1zZXJ2ZXIvc3JjL3Rlc3RzL21hcmtkb3duLnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgbWFya2Rvd25Ub0h0bWwsXG4gIGh0bWxUb01hcmtkb3duLFxuICBtYXJrZG93blRvUGxhaW5UZXh0LFxuICBpc01hcmtkb3duLFxuICBpc0h0bWwsXG4gIGZvcm1hdENvbnRlbnQsXG4gIHByZXBhcmVDb250ZW50Rm9yQ2xpY2tVcCxcbiAgcHJvY2Vzc0NsaWNrVXBSZXNwb25zZVxufSBmcm9tICcuLi91dGlscy9tYXJrZG93bic7XG5cbmRlc2NyaWJlKCdNYXJrZG93biBVdGlsaXRpZXMnLCAoKSA9PiB7XG4gIGRlc2NyaWJlKCdtYXJrZG93blRvSHRtbCcsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGNvbnZlcnQgYmFzaWMgbWFya2Rvd24gdG8gSFRNTCcsICgpID0+IHtcbiAgICAgIGNvbnN0IG1hcmtkb3duID0gJyMgSGVhZGVyXFxuXFxuKipCb2xkIHRleHQqKiBhbmQgKml0YWxpYyB0ZXh0Kic7XG4gICAgICBjb25zdCBodG1sID0gbWFya2Rvd25Ub0h0bWwobWFya2Rvd24pO1xuICAgICAgXG4gICAgICBleHBlY3QoaHRtbCkudG9Db250YWluKCc8aDE+SGVhZGVyPC9oMT4nKTtcbiAgICAgIGV4cGVjdChodG1sKS50b0NvbnRhaW4oJzxzdHJvbmc+Qm9sZCB0ZXh0PC9zdHJvbmc+Jyk7XG4gICAgICBleHBlY3QoaHRtbCkudG9Db250YWluKCc8ZW0+aXRhbGljIHRleHQ8L2VtPicpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgY29kZSBibG9ja3MnLCAoKSA9PiB7XG4gICAgICBjb25zdCBtYXJrZG93biA9ICdgYGBqYXZhc2NyaXB0XFxuY29uc3QgeCA9IDE7XFxuYGBgJztcbiAgICAgIGNvbnN0IGh0bWwgPSBtYXJrZG93blRvSHRtbChtYXJrZG93bik7XG4gICAgICBcbiAgICAgIGV4cGVjdChodG1sKS50b0NvbnRhaW4oJzxwcmU+PGNvZGUgY2xhc3M9XCJsYW5ndWFnZS1qYXZhc2NyaXB0XCI+Jyk7XG4gICAgICBleHBlY3QoaHRtbCkudG9Db250YWluKCdjb25zdCB4ID0gMTsnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGxpbmtzIGFuZCBsaXN0cycsICgpID0+IHtcbiAgICAgIGNvbnN0IG1hcmtkb3duID0gJy0gW0xpbmtdKGh0dHBzOi8vZXhhbXBsZS5jb20pXFxuLSBJdGVtIDInO1xuICAgICAgY29uc3QgaHRtbCA9IG1hcmtkb3duVG9IdG1sKG1hcmtkb3duKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KGh0bWwpLnRvQ29udGFpbignPHVsPicpO1xuICAgICAgZXhwZWN0KGh0bWwpLnRvQ29udGFpbignPGEgaHJlZj1cImh0dHBzOi8vZXhhbXBsZS5jb21cIj5MaW5rPC9hPicpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gZW1wdHkgc3RyaW5nIGZvciBpbnZhbGlkIGlucHV0JywgKCkgPT4ge1xuICAgICAgZXhwZWN0KG1hcmtkb3duVG9IdG1sKCcnKSkudG9CZSgnJyk7XG4gICAgICBleHBlY3QobWFya2Rvd25Ub0h0bWwobnVsbCBhcyBhbnkpKS50b0JlKCcnKTtcbiAgICAgIGV4cGVjdChtYXJrZG93blRvSHRtbCh1bmRlZmluZWQgYXMgYW55KSkudG9CZSgnJyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdodG1sVG9NYXJrZG93bicsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGNvbnZlcnQgYmFzaWMgSFRNTCB0byBtYXJrZG93bicsICgpID0+IHtcbiAgICAgIGNvbnN0IGh0bWwgPSAnPGgxPkhlYWRlcjwvaDE+PHA+PHN0cm9uZz5Cb2xkPC9zdHJvbmc+IGFuZCA8ZW0+aXRhbGljPC9lbT48L3A+JztcbiAgICAgIGNvbnN0IG1hcmtkb3duID0gaHRtbFRvTWFya2Rvd24oaHRtbCk7XG4gICAgICBcbiAgICAgIGV4cGVjdChtYXJrZG93bikudG9Db250YWluKCcjIEhlYWRlcicpO1xuICAgICAgZXhwZWN0KG1hcmtkb3duKS50b0NvbnRhaW4oJyoqQm9sZCoqJyk7XG4gICAgICBleHBlY3QobWFya2Rvd24pLnRvQ29udGFpbignKml0YWxpYyonKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGxpc3RzIGFuZCBsaW5rcycsICgpID0+IHtcbiAgICAgIGNvbnN0IGh0bWwgPSAnPHVsPjxsaT48YSBocmVmPVwiaHR0cHM6Ly9leGFtcGxlLmNvbVwiPkxpbms8L2E+PC9saT48bGk+SXRlbSAyPC9saT48L3VsPic7XG4gICAgICBjb25zdCBtYXJrZG93biA9IGh0bWxUb01hcmtkb3duKGh0bWwpO1xuICAgICAgXG4gICAgICBleHBlY3QobWFya2Rvd24pLnRvQ29udGFpbignLSBbTGlua10oaHR0cHM6Ly9leGFtcGxlLmNvbSknKTtcbiAgICAgIGV4cGVjdChtYXJrZG93bikudG9Db250YWluKCctIEl0ZW0gMicpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gZW1wdHkgc3RyaW5nIGZvciBpbnZhbGlkIGlucHV0JywgKCkgPT4ge1xuICAgICAgZXhwZWN0KGh0bWxUb01hcmtkb3duKCcnKSkudG9CZSgnJyk7XG4gICAgICBleHBlY3QoaHRtbFRvTWFya2Rvd24obnVsbCBhcyBhbnkpKS50b0JlKCcnKTtcbiAgICAgIGV4cGVjdChodG1sVG9NYXJrZG93bih1bmRlZmluZWQgYXMgYW55KSkudG9CZSgnJyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdtYXJrZG93blRvUGxhaW5UZXh0JywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgc3RyaXAgbWFya2Rvd24gZm9ybWF0dGluZycsICgpID0+IHtcbiAgICAgIGNvbnN0IG1hcmtkb3duID0gJyMgSGVhZGVyXFxuXFxuKipCb2xkKiogYW5kICppdGFsaWMqIHRleHQgd2l0aCBgY29kZWAnO1xuICAgICAgY29uc3QgcGxhaW5UZXh0ID0gbWFya2Rvd25Ub1BsYWluVGV4dChtYXJrZG93bik7XG4gICAgICBcbiAgICAgIGV4cGVjdChwbGFpblRleHQpLm5vdC50b0NvbnRhaW4oJyMnKTtcbiAgICAgIGV4cGVjdChwbGFpblRleHQpLm5vdC50b0NvbnRhaW4oJyoqJyk7XG4gICAgICBleHBlY3QocGxhaW5UZXh0KS5ub3QudG9Db250YWluKCcqJyk7XG4gICAgICBleHBlY3QocGxhaW5UZXh0KS5ub3QudG9Db250YWluKCdgJyk7XG4gICAgICBleHBlY3QocGxhaW5UZXh0KS50b0NvbnRhaW4oJ0hlYWRlcicpO1xuICAgICAgZXhwZWN0KHBsYWluVGV4dCkudG9Db250YWluKCdCb2xkJyk7XG4gICAgICBleHBlY3QocGxhaW5UZXh0KS50b0NvbnRhaW4oJ2l0YWxpYycpO1xuICAgICAgZXhwZWN0KHBsYWluVGV4dCkudG9Db250YWluKCdjb2RlJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBsaW5rcyBhbmQgaW1hZ2VzJywgKCkgPT4ge1xuICAgICAgY29uc3QgbWFya2Rvd24gPSAnW0xpbmsgdGV4dF0oaHR0cHM6Ly9leGFtcGxlLmNvbSkgYW5kICFbQWx0IHRleHRdKGltYWdlLmpwZyknO1xuICAgICAgY29uc3QgcGxhaW5UZXh0ID0gbWFya2Rvd25Ub1BsYWluVGV4dChtYXJrZG93bik7XG4gICAgICBcbiAgICAgIGV4cGVjdChwbGFpblRleHQpLnRvQ29udGFpbignTGluayB0ZXh0Jyk7XG4gICAgICBleHBlY3QocGxhaW5UZXh0KS50b0NvbnRhaW4oJ0FsdCB0ZXh0Jyk7XG4gICAgICBleHBlY3QocGxhaW5UZXh0KS5ub3QudG9Db250YWluKCdodHRwczovL2V4YW1wbGUuY29tJyk7XG4gICAgICBleHBlY3QocGxhaW5UZXh0KS5ub3QudG9Db250YWluKCdpbWFnZS5qcGcnKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2lzTWFya2Rvd24nLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBkZXRlY3QgbWFya2Rvd24gY29udGVudCcsICgpID0+IHtcbiAgICAgIGV4cGVjdChpc01hcmtkb3duKCcjIEhlYWRlcicpKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KGlzTWFya2Rvd24oJyoqYm9sZCoqJykpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QoaXNNYXJrZG93bignKml0YWxpYyonKSkudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChpc01hcmtkb3duKCdgY29kZWAnKSkudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChpc01hcmtkb3duKCdbbGlua10odXJsKScpKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KGlzTWFya2Rvd24oJy0gbGlzdCBpdGVtJykpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QoaXNNYXJrZG93bignMS4gbnVtYmVyZWQgaXRlbScpKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KGlzTWFya2Rvd24oJz4gYmxvY2txdW90ZScpKS50b0JlKHRydWUpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBub3QgZGV0ZWN0IHBsYWluIHRleHQgYXMgbWFya2Rvd24nLCAoKSA9PiB7XG4gICAgICBleHBlY3QoaXNNYXJrZG93bignSnVzdCBwbGFpbiB0ZXh0JykpLnRvQmUoZmFsc2UpO1xuICAgICAgZXhwZWN0KGlzTWFya2Rvd24oJ1NvbWUgdGV4dCB3aXRoIG51bWJlcnMgMTIzJykpLnRvQmUoZmFsc2UpO1xuICAgICAgZXhwZWN0KGlzTWFya2Rvd24oJycpKS50b0JlKGZhbHNlKTtcbiAgICAgIGV4cGVjdChpc01hcmtkb3duKG51bGwgYXMgYW55KSkudG9CZShmYWxzZSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdpc0h0bWwnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBkZXRlY3QgSFRNTCBjb250ZW50JywgKCkgPT4ge1xuICAgICAgZXhwZWN0KGlzSHRtbCgnPHA+cGFyYWdyYXBoPC9wPicpKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KGlzSHRtbCgnPHN0cm9uZz5ib2xkPC9zdHJvbmc+JykpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QoaXNIdG1sKCc8YSBocmVmPVwidXJsXCI+bGluazwvYT4nKSkudG9CZSh0cnVlKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgbm90IGRldGVjdCBwbGFpbiB0ZXh0IGFzIEhUTUwnLCAoKSA9PiB7XG4gICAgICBleHBlY3QoaXNIdG1sKCdKdXN0IHBsYWluIHRleHQnKSkudG9CZShmYWxzZSk7XG4gICAgICBleHBlY3QoaXNIdG1sKCdUZXh0IHdpdGggPCBhbmQgPiBzeW1ib2xzJykpLnRvQmUoZmFsc2UpO1xuICAgICAgZXhwZWN0KGlzSHRtbCgnJykpLnRvQmUoZmFsc2UpO1xuICAgICAgZXhwZWN0KGlzSHRtbChudWxsIGFzIGFueSkpLnRvQmUoZmFsc2UpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnZm9ybWF0Q29udGVudCcsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGNvbnZlcnQgbWFya2Rvd24gdG8gSFRNTCcsICgpID0+IHtcbiAgICAgIGNvbnN0IG1hcmtkb3duID0gJyoqYm9sZCoqJztcbiAgICAgIGNvbnN0IGh0bWwgPSBmb3JtYXRDb250ZW50KG1hcmtkb3duLCAnaHRtbCcpO1xuICAgICAgXG4gICAgICBleHBlY3QoaHRtbCkudG9Db250YWluKCc8c3Ryb25nPmJvbGQ8L3N0cm9uZz4nKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgY29udmVydCBIVE1MIHRvIG1hcmtkb3duJywgKCkgPT4ge1xuICAgICAgY29uc3QgaHRtbCA9ICc8c3Ryb25nPmJvbGQ8L3N0cm9uZz4nO1xuICAgICAgY29uc3QgbWFya2Rvd24gPSBmb3JtYXRDb250ZW50KGh0bWwsICdtYXJrZG93bicpO1xuICAgICAgXG4gICAgICBleHBlY3QobWFya2Rvd24pLnRvQ29udGFpbignKipib2xkKionKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgY29udmVydCB0byBwbGFpbiB0ZXh0JywgKCkgPT4ge1xuICAgICAgY29uc3QgbWFya2Rvd24gPSAnKipib2xkKionO1xuICAgICAgY29uc3QgcGxhaW4gPSBmb3JtYXRDb250ZW50KG1hcmtkb3duLCAncGxhaW4nKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KHBsYWluKS50b0NvbnRhaW4oJ2JvbGQnKTtcbiAgICAgIGV4cGVjdChwbGFpbikubm90LnRvQ29udGFpbignKionKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ3ByZXBhcmVDb250ZW50Rm9yQ2xpY2tVcCcsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHByZXBhcmUgbWFya2Rvd24gY29udGVudCBmb3IgQ2xpY2tVcCBBUEknLCAoKSA9PiB7XG4gICAgICBjb25zdCBtYXJrZG93biA9ICcjIEhlYWRlclxcblxcbioqQm9sZCoqIHRleHQnO1xuICAgICAgY29uc3QgcmVzdWx0ID0gcHJlcGFyZUNvbnRlbnRGb3JDbGlja1VwKG1hcmtkb3duKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KHJlc3VsdC5kZXNjcmlwdGlvbikudG9Db250YWluKCc8aDE+SGVhZGVyPC9oMT4nKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuZGVzY3JpcHRpb24pLnRvQ29udGFpbignPHN0cm9uZz5Cb2xkPC9zdHJvbmc+Jyk7XG4gICAgICBleHBlY3QocmVzdWx0LnRleHRfY29udGVudCkudG9Db250YWluKCdIZWFkZXInKTtcbiAgICAgIGV4cGVjdChyZXN1bHQudGV4dF9jb250ZW50KS50b0NvbnRhaW4oJ0JvbGQnKTtcbiAgICAgIGV4cGVjdChyZXN1bHQudGV4dF9jb250ZW50KS5ub3QudG9Db250YWluKCc8aDE+Jyk7XG4gICAgICBleHBlY3QocmVzdWx0LnRleHRfY29udGVudCkubm90LnRvQ29udGFpbignKionKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIHBsYWluIHRleHQgY29udGVudCcsICgpID0+IHtcbiAgICAgIGNvbnN0IHBsYWluVGV4dCA9ICdKdXN0IHBsYWluIHRleHQnO1xuICAgICAgY29uc3QgcmVzdWx0ID0gcHJlcGFyZUNvbnRlbnRGb3JDbGlja1VwKHBsYWluVGV4dCk7XG4gICAgICBcbiAgICAgIGV4cGVjdChyZXN1bHQuZGVzY3JpcHRpb24pLnRvQmUocGxhaW5UZXh0KTtcbiAgICAgIGV4cGVjdChyZXN1bHQudGV4dF9jb250ZW50KS50b0JlKHBsYWluVGV4dCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBIVE1MIGNvbnRlbnQnLCAoKSA9PiB7XG4gICAgICBjb25zdCBodG1sID0gJzxwPjxzdHJvbmc+Qm9sZDwvc3Ryb25nPiB0ZXh0PC9wPic7XG4gICAgICBjb25zdCByZXN1bHQgPSBwcmVwYXJlQ29udGVudEZvckNsaWNrVXAoaHRtbCk7XG4gICAgICBcbiAgICAgIGV4cGVjdChyZXN1bHQuZGVzY3JpcHRpb24pLnRvQmUoaHRtbCk7XG4gICAgICBleHBlY3QocmVzdWx0LnRleHRfY29udGVudCkudG9Db250YWluKCdCb2xkIHRleHQnKTtcbiAgICAgIGV4cGVjdChyZXN1bHQudGV4dF9jb250ZW50KS5ub3QudG9Db250YWluKCc8cD4nKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGVtcHR5IGNvbnRlbnQnLCAoKSA9PiB7XG4gICAgICBjb25zdCByZXN1bHQgPSBwcmVwYXJlQ29udGVudEZvckNsaWNrVXAoJycpO1xuICAgICAgXG4gICAgICBleHBlY3QocmVzdWx0LmRlc2NyaXB0aW9uKS50b0JlKCcnKTtcbiAgICAgIGV4cGVjdChyZXN1bHQudGV4dF9jb250ZW50KS50b0JlVW5kZWZpbmVkKCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdwcm9jZXNzQ2xpY2tVcFJlc3BvbnNlJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgcHJvY2VzcyB0YXNrIHJlc3BvbnNlIHdpdGggSFRNTCBkZXNjcmlwdGlvbicsICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0ge1xuICAgICAgICBpZDogJzEyMycsXG4gICAgICAgIG5hbWU6ICdUZXN0IFRhc2snLFxuICAgICAgICBkZXNjcmlwdGlvbjogJzxoMT5IZWFkZXI8L2gxPjxwPjxzdHJvbmc+Qm9sZDwvc3Ryb25nPiB0ZXh0PC9wPicsXG4gICAgICAgIHRleHRfY29udGVudDogJ0hlYWRlclxcbkJvbGQgdGV4dCdcbiAgICAgIH07XG4gICAgICBcbiAgICAgIGNvbnN0IHByb2Nlc3NlZCA9IHByb2Nlc3NDbGlja1VwUmVzcG9uc2UocmVzcG9uc2UpO1xuICAgICAgXG4gICAgICBleHBlY3QocHJvY2Vzc2VkLmRlc2NyaXB0aW9uX21hcmtkb3duKS50b0NvbnRhaW4oJyMgSGVhZGVyJyk7XG4gICAgICBleHBlY3QocHJvY2Vzc2VkLmRlc2NyaXB0aW9uX21hcmtkb3duKS50b0NvbnRhaW4oJyoqQm9sZCoqJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHByb2Nlc3MgY29tbWVudCByZXNwb25zZSB3aXRoIHJpY2ggdGV4dCBibG9ja3MnLCAoKSA9PiB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IHtcbiAgICAgICAgaWQ6ICc0NTYnLFxuICAgICAgICBjb21tZW50OiBbJzxwPkNvbW1lbnQgd2l0aCA8c3Ryb25nPmJvbGQ8L3N0cm9uZz4gdGV4dDwvcD4nXSxcbiAgICAgICAgY29tbWVudF90ZXh0OiAnQ29tbWVudCB3aXRoIGJvbGQgdGV4dCdcbiAgICAgIH07XG4gICAgICBcbiAgICAgIGNvbnN0IHByb2Nlc3NlZCA9IHByb2Nlc3NDbGlja1VwUmVzcG9uc2UocmVzcG9uc2UpO1xuICAgICAgXG4gICAgICBleHBlY3QocHJvY2Vzc2VkLmNvbW1lbnRfbWFya2Rvd24pLnRvQ29udGFpbignKipib2xkKionKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIHJlc3BvbnNlcyB3aXRob3V0IEhUTUwgY29udGVudCcsICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0ge1xuICAgICAgICBpZDogJzc4OScsXG4gICAgICAgIG5hbWU6ICdQbGFpbiBUYXNrJyxcbiAgICAgICAgZGVzY3JpcHRpb246ICdKdXN0IHBsYWluIHRleHQnXG4gICAgICB9O1xuICAgICAgXG4gICAgICBjb25zdCBwcm9jZXNzZWQgPSBwcm9jZXNzQ2xpY2tVcFJlc3BvbnNlKHJlc3BvbnNlKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KHByb2Nlc3NlZC5kZXNjcmlwdGlvbl9tYXJrZG93bikudG9CZVVuZGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KHByb2Nlc3NlZC5kZXNjcmlwdGlvbikudG9CZSgnSnVzdCBwbGFpbiB0ZXh0Jyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBudWxsL3VuZGVmaW5lZCByZXNwb25zZXMnLCAoKSA9PiB7XG4gICAgICBleHBlY3QocHJvY2Vzc0NsaWNrVXBSZXNwb25zZShudWxsKSkudG9CZShudWxsKTtcbiAgICAgIGV4cGVjdChwcm9jZXNzQ2xpY2tVcFJlc3BvbnNlKHVuZGVmaW5lZCkpLnRvQmUodW5kZWZpbmVkKTtcbiAgICAgIGV4cGVjdChwcm9jZXNzQ2xpY2tVcFJlc3BvbnNlKCdzdHJpbmcnKSkudG9CZSgnc3RyaW5nJyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdHaXRIdWIgRmxhdm9yZWQgTWFya2Rvd24gU3VwcG9ydCcsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHN1cHBvcnQgc3RyaWtldGhyb3VnaCcsICgpID0+IHtcbiAgICAgIGNvbnN0IG1hcmtkb3duID0gJ35+c3RyaWtldGhyb3VnaH5+JztcbiAgICAgIGNvbnN0IGh0bWwgPSBtYXJrZG93blRvSHRtbChtYXJrZG93bik7XG4gICAgICBcbiAgICAgIGV4cGVjdChodG1sKS50b0NvbnRhaW4oJzxkZWw+c3RyaWtldGhyb3VnaDwvZGVsPicpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBzdXBwb3J0IHRhYmxlcycsICgpID0+IHtcbiAgICAgIGNvbnN0IG1hcmtkb3duID0gJ3wgSGVhZGVyIDEgfCBIZWFkZXIgMiB8XFxufC0tLS0tLS0tLS18LS0tLS0tLS0tLXxcXG58IENlbGwgMSAgIHwgQ2VsbCAyICAgfCc7XG4gICAgICBjb25zdCBodG1sID0gbWFya2Rvd25Ub0h0bWwobWFya2Rvd24pO1xuICAgICAgXG4gICAgICBleHBlY3QoaHRtbCkudG9Db250YWluKCc8dGFibGU+Jyk7XG4gICAgICBleHBlY3QoaHRtbCkudG9Db250YWluKCc8dGg+SGVhZGVyIDE8L3RoPicpO1xuICAgICAgZXhwZWN0KGh0bWwpLnRvQ29udGFpbignPHRkPkNlbGwgMTwvdGQ+Jyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHN1cHBvcnQgdGFzayBsaXN0cycsICgpID0+IHtcbiAgICAgIGNvbnN0IG1hcmtkb3duID0gJy0gW3hdIENvbXBsZXRlZCB0YXNrXFxuLSBbIF0gSW5jb21wbGV0ZSB0YXNrJztcbiAgICAgIGNvbnN0IGh0bWwgPSBtYXJrZG93blRvSHRtbChtYXJrZG93bik7XG4gICAgICBcbiAgICAgIGV4cGVjdChodG1sKS50b0NvbnRhaW4oJ3R5cGU9XCJjaGVja2JveFwiJyk7XG4gICAgICBleHBlY3QoaHRtbCkudG9Db250YWluKCdjaGVja2VkPVwiXCInKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgc3VwcG9ydCBmZW5jZWQgY29kZSBibG9ja3Mgd2l0aCBsYW5ndWFnZScsICgpID0+IHtcbiAgICAgIGNvbnN0IG1hcmtkb3duID0gJ2BgYHR5cGVzY3JpcHRcXG5jb25zdCB4OiBudW1iZXIgPSAxO1xcbmBgYCc7XG4gICAgICBjb25zdCBodG1sID0gbWFya2Rvd25Ub0h0bWwobWFya2Rvd24pO1xuICAgICAgXG4gICAgICBleHBlY3QoaHRtbCkudG9Db250YWluKCdjbGFzcz1cImxhbmd1YWdlLXR5cGVzY3JpcHRcIicpO1xuICAgICAgZXhwZWN0KGh0bWwpLnRvQ29udGFpbignY29uc3QgeDogbnVtYmVyID0gMTsnKTtcbiAgICB9KTtcbiAgfSk7XG59KTtcbiJdLCJ2ZXJzaW9uIjozfQ==