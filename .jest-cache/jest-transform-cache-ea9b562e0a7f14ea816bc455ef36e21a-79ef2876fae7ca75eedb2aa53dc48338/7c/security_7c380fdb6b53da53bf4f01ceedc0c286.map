{"version":3,"names":["cov_161buh4ef6","actualCoverage","crypto","z","DEFAULT_RATE_LIMITS","s","webhook","windowMs","maxRequests","api","upload","RateLimiter","constructor","f","requests","Map","isAllowed","key","config","now","Date","windowStart","keyRequests","b","get","recentRequests","filter","time","length","push","set","reset","delete","clear","rateLimiter","validateApiToken","token","isValid","error","includes","sanitizeInput","input","replace","trim","Array","isArray","map","sanitized","value","Object","entries","validateWebhookSignature","payload","signature","secret","expectedSignature","createHmac","update","digest","receivedSignature","test","timingSafeEqual","Buffer","from","Error","message","validateFileUpload","filename","mimetype","size","errors","dangerousExtensions","extension","toLowerCase","split","pop","allowedMimetypes","undefined","maxSize","validateUrl","url","parsedUrl","URL","protocol","hostname","startsWith","generateSecureToken","randomBytes","toString","hashSensitiveData","data","salt","actualSalt","pbkdf2Sync","validateEnvironment","requiredVars","varName","process","env","validation","getSecurityHeaders","logSecurityEvent","event","details","level","timestamp","toISOString","logEntry","console","toUpperCase","validateMcpParameters","schema","params","sanitizedParams","parse","ZodError","err","path","join"],"sources":["/Users/peterkrzyzek/Development/clickup-mcp-server/src/utils/security.ts"],"sourcesContent":["import crypto from 'crypto';\nimport { z } from 'zod';\n\n/**\n * Security utilities for the ClickUp MCP Server\n */\n\n// Rate limiting configuration\nexport interface RateLimitConfig {\n  windowMs: number;\n  maxRequests: number;\n}\n\n// Default rate limits\nexport const DEFAULT_RATE_LIMITS: Record<string, RateLimitConfig> = {\n  webhook: { windowMs: 60000, maxRequests: 100 }, // 100 requests per minute\n  api: { windowMs: 60000, maxRequests: 1000 }, // 1000 requests per minute\n  upload: { windowMs: 60000, maxRequests: 10 } // 10 uploads per minute\n};\n\n// Rate limiter implementation\nclass RateLimiter {\n  private requests: Map<string, number[]> = new Map();\n\n  isAllowed(key: string, config: RateLimitConfig): boolean {\n    const now = Date.now();\n    const windowStart = now - config.windowMs;\n    \n    // Get existing requests for this key\n    const keyRequests = this.requests.get(key) || [];\n    \n    // Filter out old requests\n    const recentRequests = keyRequests.filter(time => time > windowStart);\n    \n    // Check if under limit\n    if (recentRequests.length >= config.maxRequests) {\n      return false;\n    }\n    \n    // Add current request\n    recentRequests.push(now);\n    this.requests.set(key, recentRequests);\n    \n    return true;\n  }\n\n  reset(key?: string): void {\n    if (key) {\n      this.requests.delete(key);\n    } else {\n      this.requests.clear();\n    }\n  }\n}\n\nexport const rateLimiter = new RateLimiter();\n\n/**\n * Validate and sanitize API token\n */\nexport const validateApiToken = (token: string): { isValid: boolean; error?: string } => {\n  if (!token) {\n    return { isValid: false, error: 'API token is required' };\n  }\n\n  if (typeof token !== 'string') {\n    return { isValid: false, error: 'API token must be a string' };\n  }\n\n  if (token.length < 10) {\n    return { isValid: false, error: 'API token appears to be too short' };\n  }\n\n  if (token.length > 200) {\n    return { isValid: false, error: 'API token appears to be too long' };\n  }\n\n  // Check for suspicious patterns\n  if (token.includes(' ') || token.includes('\\n') || token.includes('\\t')) {\n    return { isValid: false, error: 'API token contains invalid characters' };\n  }\n\n  return { isValid: true };\n};\n\n/**\n * Sanitize user input to prevent injection attacks\n */\nexport const sanitizeInput = (input: any): any => {\n  if (typeof input === 'string') {\n    // Remove potentially dangerous characters\n    return input\n      .replace(/[<>]/g, '') // Remove HTML tags\n      .replace(/javascript:/gi, '') // Remove javascript: protocol\n      .replace(/on\\w+=/gi, '') // Remove event handlers\n      .trim();\n  }\n\n  if (Array.isArray(input)) {\n    return input.map(sanitizeInput);\n  }\n\n  if (input && typeof input === 'object') {\n    const sanitized: any = {};\n    for (const [key, value] of Object.entries(input)) {\n      sanitized[sanitizeInput(key)] = sanitizeInput(value);\n    }\n    return sanitized;\n  }\n\n  return input;\n};\n\n/**\n * Validate webhook signature with timing-safe comparison\n */\nexport const validateWebhookSignature = (\n  payload: string,\n  signature: string,\n  secret: string\n): { isValid: boolean; error?: string } => {\n  try {\n    if (!payload || !signature || !secret) {\n      return { isValid: false, error: 'Missing required parameters for signature validation' };\n    }\n\n    // Generate expected signature\n    const expectedSignature = crypto\n      .createHmac('sha256', secret)\n      .update(payload, 'utf8')\n      .digest('hex');\n\n    // Extract signature from header (remove 'sha256=' prefix if present)\n    const receivedSignature = signature.replace(/^sha256=/, '');\n\n    // Validate signature format\n    if (!/^[a-f0-9]{64}$/i.test(receivedSignature)) {\n      return { isValid: false, error: 'Invalid signature format' };\n    }\n\n    // Timing-safe comparison\n    const isValid = crypto.timingSafeEqual(\n      Buffer.from(expectedSignature, 'hex'),\n      Buffer.from(receivedSignature, 'hex')\n    );\n\n    return { isValid };\n  } catch (error) {\n    return { \n      isValid: false, \n      error: `Signature validation error: ${error instanceof Error ? error.message : 'Unknown error'}` \n    };\n  }\n};\n\n/**\n * Validate file upload security\n */\nexport const validateFileUpload = (\n  filename: string,\n  mimetype?: string,\n  size?: number\n): { isValid: boolean; errors: string[] } => {\n  const errors: string[] = [];\n\n  // Validate filename\n  if (!filename || typeof filename !== 'string') {\n    errors.push('Filename is required and must be a string');\n  } else {\n    // Check for path traversal attempts\n    if (filename.includes('..') || filename.includes('/') || filename.includes('\\\\')) {\n      errors.push('Filename contains invalid path characters');\n    }\n\n    // Check for dangerous extensions\n    const dangerousExtensions = [\n      '.exe', '.bat', '.cmd', '.com', '.pif', '.scr', '.vbs', '.js', '.jar',\n      '.php', '.asp', '.aspx', '.jsp', '.sh', '.ps1', '.py', '.rb'\n    ];\n    \n    const extension = filename.toLowerCase().split('.').pop();\n    if (extension && dangerousExtensions.includes(`.${extension}`)) {\n      errors.push('File type not allowed for security reasons');\n    }\n\n    // Check filename length\n    if (filename.length > 255) {\n      errors.push('Filename too long (max 255 characters)');\n    }\n\n    // Check for null bytes\n    if (filename.includes('\\0')) {\n      errors.push('Filename contains null bytes');\n    }\n  }\n\n  // Validate mimetype if provided\n  if (mimetype) {\n    const allowedMimetypes = [\n      // Images\n      'image/jpeg', 'image/png', 'image/gif', 'image/webp', 'image/svg+xml',\n      // Documents\n      'application/pdf', 'text/plain', 'text/csv',\n      'application/msword', 'application/vnd.openxmlformats-officedocument.wordprocessingml.document',\n      'application/vnd.ms-excel', 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',\n      'application/vnd.ms-powerpoint', 'application/vnd.openxmlformats-officedocument.presentationml.presentation',\n      // Archives\n      'application/zip', 'application/x-rar-compressed', 'application/x-7z-compressed',\n      // Media\n      'video/mp4', 'video/webm', 'audio/mp3', 'audio/wav', 'audio/ogg'\n    ];\n\n    if (!allowedMimetypes.includes(mimetype)) {\n      errors.push(`Mimetype '${mimetype}' not allowed`);\n    }\n  }\n\n  // Validate file size if provided (max 100MB)\n  if (size !== undefined) {\n    const maxSize = 100 * 1024 * 1024; // 100MB\n    if (size > maxSize) {\n      errors.push(`File size too large (max ${maxSize} bytes)`);\n    }\n    if (size < 0) {\n      errors.push('Invalid file size');\n    }\n  }\n\n  return {\n    isValid: errors.length === 0,\n    errors\n  };\n};\n\n/**\n * Validate URL for security\n */\nexport const validateUrl = (url: string): { isValid: boolean; error?: string } => {\n  try {\n    const parsedUrl = new URL(url);\n    \n    // Only allow HTTP and HTTPS\n    if (!['http:', 'https:'].includes(parsedUrl.protocol)) {\n      return { isValid: false, error: 'Only HTTP and HTTPS URLs are allowed' };\n    }\n\n    // Block localhost and private IPs for security\n    const hostname = parsedUrl.hostname.toLowerCase();\n    if (\n      hostname === 'localhost' ||\n      hostname === '127.0.0.1' ||\n      hostname === '::1' ||\n      hostname.startsWith('192.168.') ||\n      hostname.startsWith('10.') ||\n      hostname.startsWith('172.16.') ||\n      hostname.startsWith('172.17.') ||\n      hostname.startsWith('172.18.') ||\n      hostname.startsWith('172.19.') ||\n      hostname.startsWith('172.2') ||\n      hostname.startsWith('172.30.') ||\n      hostname.startsWith('172.31.')\n    ) {\n      return { isValid: false, error: 'Private and localhost URLs are not allowed' };\n    }\n\n    return { isValid: true };\n  } catch (error) {\n    return { isValid: false, error: 'Invalid URL format' };\n  }\n};\n\n/**\n * Generate secure random string\n */\nexport const generateSecureToken = (length: number = 32): string => {\n  return crypto.randomBytes(length).toString('hex');\n};\n\n/**\n * Hash sensitive data\n */\nexport const hashSensitiveData = (data: string, salt?: string): string => {\n  const actualSalt = salt || crypto.randomBytes(16).toString('hex');\n  return crypto.pbkdf2Sync(data, actualSalt, 10000, 64, 'sha512').toString('hex');\n};\n\n/**\n * Validate environment variables\n */\nexport const validateEnvironment = (): { isValid: boolean; errors: string[] } => {\n  const errors: string[] = [];\n\n  // Check required environment variables\n  const requiredVars = ['CLICKUP_API_TOKEN'];\n  \n  for (const varName of requiredVars) {\n    const value = process.env[varName];\n    if (!value) {\n      errors.push(`Missing required environment variable: ${varName}`);\n    } else {\n      // Validate API token format\n      if (varName === 'CLICKUP_API_TOKEN') {\n        const validation = validateApiToken(value);\n        if (!validation.isValid) {\n          errors.push(`Invalid ${varName}: ${validation.error}`);\n        }\n      }\n    }\n  }\n\n  return {\n    isValid: errors.length === 0,\n    errors\n  };\n};\n\n/**\n * Security headers for HTTP responses\n */\nexport const getSecurityHeaders = (): Record<string, string> => {\n  return {\n    'X-Content-Type-Options': 'nosniff',\n    'X-Frame-Options': 'DENY',\n    'X-XSS-Protection': '1; mode=block',\n    'Strict-Transport-Security': 'max-age=31536000; includeSubDomains',\n    'Content-Security-Policy': \"default-src 'self'\",\n    'Referrer-Policy': 'strict-origin-when-cross-origin'\n  };\n};\n\n/**\n * Log security events\n */\nexport const logSecurityEvent = (\n  event: string,\n  details: Record<string, any>,\n  level: 'info' | 'warn' | 'error' = 'info'\n): void => {\n  const timestamp = new Date().toISOString();\n  const logEntry = {\n    timestamp,\n    event,\n    level,\n    details: sanitizeInput(details)\n  };\n\n  // In production, this should go to a proper logging system\n  console.error(`[SECURITY ${level.toUpperCase()}] ${timestamp}: ${event}`, logEntry);\n};\n\n/**\n * Validate MCP tool parameters\n */\nexport const validateMcpParameters = (\n  schema: z.ZodSchema,\n  params: any\n): { isValid: boolean; data?: any; errors?: string[] } => {\n  try {\n    // Sanitize input first\n    const sanitizedParams = sanitizeInput(params);\n    \n    // Validate with schema\n    const data = schema.parse(sanitizedParams);\n    \n    return { isValid: true, data };\n  } catch (error) {\n    if (error instanceof z.ZodError) {\n      const errors = error.errors.map(err => `${err.path.join('.')}: ${err.message}`);\n      return { isValid: false, errors };\n    }\n    \n    return { \n      isValid: false, \n      errors: [`Validation error: ${error instanceof Error ? error.message : 'Unknown error'}`] \n    };\n  }\n};\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}