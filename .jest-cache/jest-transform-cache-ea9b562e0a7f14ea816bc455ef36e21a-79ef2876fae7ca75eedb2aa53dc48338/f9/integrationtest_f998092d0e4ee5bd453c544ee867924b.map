{"file":"/Users/peterkrzyzek/Development/clickup-mcp-server/src/tests/integration.test.ts","mappings":"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","names":[],"sources":["/Users/peterkrzyzek/Development/clickup-mcp-server/src/tests/integration.test.ts"],"sourcesContent":["import { describe, it, expect, beforeAll, afterAll, jest } from '@jest/globals';\nimport { ClickUpClient } from '../clickup-client/index.js';\nimport { validateWebhookSignature } from '../utils/security.js';\nimport { handleClickUpApiError } from '../utils/error-handling.js';\n\n// Mock ClickUp API responses\nconst mockApiResponses = {\n  workspaces: {\n    teams: [\n      {\n        id: '123',\n        name: 'Test Workspace',\n        color: '#7b68ee',\n        avatar: null,\n        members: []\n      }\n    ]\n  },\n  tasks: {\n    tasks: [\n      {\n        id: 'task123',\n        name: 'Test Task',\n        description: 'Test task description',\n        status: {\n          status: 'Open',\n          color: '#d3d3d3',\n          type: 'open'\n        },\n        orderindex: '1.00000000000000000000000000000000',\n        date_created: '1234567890000',\n        date_updated: '1234567890000',\n        date_closed: null,\n        creator: {\n          id: 456,\n          username: 'testuser',\n          color: '#7b68ee',\n          email: 'test@example.com'\n        },\n        assignees: [],\n        watchers: [],\n        checklists: [],\n        tags: [],\n        parent: null,\n        priority: null,\n        due_date: null,\n        start_date: null,\n        points: null,\n        time_estimate: null,\n        custom_fields: [],\n        dependencies: [],\n        linked_tasks: [],\n        team_id: '123',\n        url: 'https://app.clickup.com/t/task123',\n        permission_level: 'create'\n      }\n    ]\n  }\n};\n\ndescribe('Integration Tests', () => {\n  let mockAxios: any;\n\n  beforeAll(() => {\n    // Mock environment variables\n    process.env.CLICKUP_API_TOKEN = 'pk_test_token_1234567890abcdef';\n\n    // Create mock axios instance\n    mockAxios = {\n      get: jest.fn(),\n      post: jest.fn(),\n      put: jest.fn(),\n      delete: jest.fn(),\n      create: jest.fn().mockReturnThis(),\n      interceptors: {\n        response: {\n          use: jest.fn()\n        }\n      }\n    };\n\n    // Mock axios module\n    jest.mock('axios', () => ({\n      create: jest.fn(() => mockAxios)\n    }));\n  });\n\n  afterAll(() => {\n    jest.restoreAllMocks();\n  });\n\n  describe('ClickUp Client Integration', () => {\n    it('should create client with valid token', () => {\n      const client = new ClickUpClient({ apiToken: 'pk_test_token_1234567890abcdef' });\n      expect(client).toBeDefined();\n    });\n\n    it('should reject invalid token', () => {\n      expect(() => {\n        new ClickUpClient({ apiToken: '' });\n      }).toThrow('ClickUp API token is required');\n    });\n\n    it('should make GET request', async () => {\n      mockAxios.get.mockResolvedValueOnce({ data: mockApiResponses.workspaces });\n      \n      const client = new ClickUpClient({ apiToken: 'pk_test_token_1234567890abcdef' });\n      const result = await client.get('/team');\n      \n      expect(result).toEqual(mockApiResponses.workspaces);\n      expect(mockAxios.get).toHaveBeenCalledWith('/team', { params: undefined });\n    });\n\n    it('should make POST request', async () => {\n      const postData = { name: 'Test Task' };\n      mockAxios.post.mockResolvedValueOnce({ data: { success: true } });\n      \n      const client = new ClickUpClient({ apiToken: 'pk_test_token_1234567890abcdef' });\n      const result = await client.post('/task', postData);\n      \n      expect(result).toEqual({ success: true });\n      expect(mockAxios.post).toHaveBeenCalledWith('/task', postData);\n    });\n  });\n\n  describe('Webhook Processing Integration', () => {\n    it('should validate webhook signature correctly', () => {\n      const payload = '{\"test\": \"data\"}';\n      const secret = 'test-secret';\n      const crypto = require('crypto');\n      const signature = crypto.createHmac('sha256', secret).update(payload).digest('hex');\n\n      const result = validateWebhookSignature(payload, `sha256=${signature}`, secret);\n      expect(result.isValid).toBe(true);\n    });\n\n    it('should reject invalid webhook signature', () => {\n      const payload = '{\"test\": \"data\"}';\n      const secret = 'test-secret';\n      const invalidSignature = 'invalid-signature';\n\n      const result = validateWebhookSignature(payload, invalidSignature, secret);\n      expect(result.isValid).toBe(false);\n      expect(result.error).toContain('Invalid signature format');\n    });\n\n    it('should process webhook payload correctly', () => {\n      const webhookPayload = {\n        id: 90110164070264,\n        hist_id: \"4697736615798917760\",\n        date: 1755803061841,\n        version: {\n          object_type: \"comment\",\n          object_id: \"90110164070264\",\n          workspace_id: 14168111,\n          operation: \"c\",\n          data: {\n            context: {\n              root_parent_type: 1,\n              is_chat: false,\n              audit_context: {\n                userid: 38366580,\n                current_time: 1755803061674,\n                route: \"*\"\n              },\n              originating_service: \"publicapi\"\n            },\n            relationships: [\n              {\n                type: \"comment-author\",\n                object_type: \"user\",\n                object_id: 38366580,\n                workspace_id: \"14168111\"\n              },\n              {\n                type: \"comment-parent\",\n                object_type: \"task\",\n                object_id: \"868f9p6ad\",\n                workspace_id: \"14168111\"\n              }\n            ],\n            changes: [\n              {\n                field: \"date_created\",\n                after: 1755803061841\n              }\n            ]\n          },\n          master_id: 13,\n          version: 1755803061879000,\n          deleted: false,\n          traceparent: \"6041334444293036127\",\n          date_created: 1755803061879,\n          date_updated: 1755803061879,\n          event_publish_time: 1755803061900\n        }\n      };\n\n      // Test payload structure\n      expect(webhookPayload.version.object_type).toBe('comment');\n      expect(webhookPayload.version.operation).toBe('c');\n      expect(webhookPayload.version.workspace_id).toBe(14168111);\n      expect(webhookPayload.version.data.context.audit_context.userid).toBe(38366580);\n      expect(webhookPayload.version.data.relationships).toHaveLength(2);\n      expect(webhookPayload.version.data.changes).toHaveLength(1);\n    });\n  });\n\n  describe('Error Handling Integration', () => {\n    it('should handle network timeouts', () => {\n      const timeoutError = {\n        code: 'ETIMEDOUT',\n        message: 'Request timeout'\n      };\n\n      const structuredError = handleClickUpApiError(timeoutError);\n      \n      expect(structuredError.type).toBe('TIMEOUT');\n      expect(structuredError.retryable).toBe(true);\n      expect(structuredError.retryAfter).toBe(10);\n    });\n\n    it('should handle rate limiting', () => {\n      const rateLimitError = {\n        response: {\n          status: 429,\n          data: { err: 'Rate limited' },\n          headers: { 'retry-after': '60' }\n        }\n      };\n\n      const structuredError = handleClickUpApiError(rateLimitError);\n      \n      expect(structuredError.type).toBe('RATE_LIMIT');\n      expect(structuredError.retryable).toBe(true);\n      expect(structuredError.retryAfter).toBe(60);\n    });\n\n    it('should handle authentication errors', () => {\n      const authError = {\n        response: {\n          status: 401,\n          data: { err: 'Invalid token' }\n        }\n      };\n\n      const structuredError = handleClickUpApiError(authError);\n      \n      expect(structuredError.type).toBe('AUTHENTICATION');\n      expect(structuredError.severity).toBe('HIGH');\n      expect(structuredError.retryable).toBe(false);\n    });\n  });\n\n  describe('Security Integration', () => {\n    it('should validate API token format', () => {\n      const { validateApiToken } = require('../utils/security.js');\n      \n      const validToken = validateApiToken('pk_1234567890abcdef');\n      expect(validToken.isValid).toBe(true);\n      \n      const invalidToken = validateApiToken('invalid');\n      expect(invalidToken.isValid).toBe(false);\n      expect(invalidToken.error).toContain('too short');\n    });\n\n    it('should sanitize malicious input', () => {\n      const { sanitizeInput } = require('../utils/security.js');\n      \n      const maliciousInput = '<script>alert(\"xss\")</script>';\n      const sanitized = sanitizeInput(maliciousInput);\n      \n      expect(sanitized).not.toContain('<script>');\n      expect(sanitized).not.toContain('</script>');\n    });\n\n    it('should validate file uploads securely', () => {\n      const { validateFileUpload } = require('../utils/security.js');\n      \n      const safeFile = validateFileUpload('document.pdf', 'application/pdf', 1024);\n      expect(safeFile.isValid).toBe(true);\n      \n      const dangerousFile = validateFileUpload('malware.exe');\n      expect(dangerousFile.isValid).toBe(false);\n      expect(dangerousFile.errors).toContain('File type not allowed for security reasons');\n      \n      const pathTraversal = validateFileUpload('../../../etc/passwd');\n      expect(pathTraversal.isValid).toBe(false);\n      expect(pathTraversal.errors).toContain('Filename contains invalid path characters');\n    });\n\n    it('should validate URLs securely', () => {\n      const { validateUrl } = require('../utils/security.js');\n      \n      const validUrl = validateUrl('https://example.com/webhook');\n      expect(validUrl.isValid).toBe(true);\n      \n      const localhostUrl = validateUrl('http://localhost:3000/webhook');\n      expect(localhostUrl.isValid).toBe(false);\n      expect(localhostUrl.error).toContain('Private and localhost URLs are not allowed');\n      \n      const invalidProtocol = validateUrl('ftp://example.com/file');\n      expect(invalidProtocol.isValid).toBe(false);\n      expect(invalidProtocol.error).toContain('Only HTTP and HTTPS URLs are allowed');\n    });\n  });\n\n  describe('Performance Integration', () => {\n    it('should handle concurrent requests efficiently', async () => {\n      const requests = Array.from({ length: 10 }, (_, i) => ({\n        method: 'GET' as const,\n        endpoint: `/task/${i}`,\n        data: undefined,\n        params: undefined\n      }));\n\n      // Mock successful responses\n      mockAxios.get.mockResolvedValue({ data: { success: true } });\n\n      const startTime = Date.now();\n      \n      // Simulate batch processing\n      const results = await Promise.all(\n        requests.map(async (req) => {\n          try {\n            const client = new ClickUpClient({ apiToken: 'pk_test_token_1234567890abcdef' });\n            const result = await client.get(req.endpoint, req.params);\n            return { success: true, data: result };\n          } catch (error) {\n            return { success: false, error: error instanceof Error ? error.message : 'Unknown error' };\n          }\n        })\n      );\n\n      const duration = Date.now() - startTime;\n      \n      expect(results).toHaveLength(10);\n      expect(results.every(r => r.success)).toBe(true);\n      expect(duration).toBeLessThan(1000); // Should complete within 1 second\n    });\n  });\n});\n"],"version":3}